
taskSnipets:

  # The following snipets are designed for use on a Linux machine
  linux:

    # This snipet will be merged into ALL other snipets
    all:
     environment:
       - pkgsDir: packages
       - dlsDir: $pkgsDir/downloads
       - pkgDir: $pkgsDir/$pkgName
       - installPrefix: ../../local

    # download and extract the *.tar.gz sources from a GitHub repository
    gitHubDownload:
      environment:
        - url: https://github.com/${repoPath}/archive/refs/tags/${repoVersion}.tar.gz
        - tarFile: ${pkgName}-${repoVersion}.tar.gz
        - dlName: $dlsDir/$tarFile
      actions:
        - mkdir -p $dlsDir
        - mkdir -p $pkgDir
        - curl --location --output $dlName $url
        - tar xf $dlName --strip-components=1 --directory=$pkgDir
      tools:
        - curl
        - tar

    # Perform a "standard" CMake compile and install
    cmakeCompile:
      actions:
        -  mkdir -p $pkgDir/build
        -  cd $pkgDir/build
        - - cmake ..
          - -D CMAKE_GENERATOR=Ninja
          - -D CMAKE_PREFIX_PATH=$installPrefix
          - -D CMAKE_INSTALL_PREFIX=$installPrefix
        -  ninja -j $(nproc) install
      tools:
        - cmake
        - ninja

    # Perform a "standard" gcc compile
    gccCompile:
      actions:
        - $cc $CFLAGS $INCLUDES -o $out $in
      tools:
        - gcc

    # Perform a "standard" gcc link
    gccLink:
      actions:
        - $cc $LINKFLAGS $LIBS -o $out $in
      tools:
        - gcc
